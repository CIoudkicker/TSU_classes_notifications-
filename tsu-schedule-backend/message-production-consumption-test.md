# Проверка производства и потребления сообщений

## Тестовая цель:
Убедитесь, что архитектура приложения правильно создает и использует сообщения.
## Шаги теста:
1. Предпосылка: библиотека kafkajs была установлена ​​до запуска кода (ее можно установить, запустив `npm install kafkajs`), и была запущена команда `docker-compose up --build`
2. Добавьте файл message-production-consumption-test.js, подробности см. в файле message-production-consumption-test.js.
3. Параметры подключения кластера Kafka
```javascript
const kafkaBrokers = ['localhost:29092'];
const kafkaTopic = 'моя тема';
```
4. Запустите `node message-production-consumment-test.js`
- Создайте производителя с помощью клиентской библиотеки Kafka в приложении Node.js.
- Отправка нескольких сообщений в указанную тему Kafka.
- Создайте потребителя с помощью клиентской библиотеки Kafka в том же приложении Node.js.
- Потребители получают сообщения из тем Kafka и проверяют содержание и порядок сообщений.
## Результаты теста:

![](https://huatu.98youxi.com/markdown/work/uploads/upload_75b0ddf6921ac58aa1edcd5aec234a30.png)

- Приложение Node.js успешно создало производителя Kafka и смогло эффективно взаимодействовать с кластером Kafka.
- Несколько сообщений были успешно отправлены в указанную тему Kafka и сохраняются в том порядке, в котором они были отправлены.
- Потребитель Kafka успешно подключается к кластеру Kafka и получает сообщения из указанной темы.
- Потребитель проверяет, что содержание и порядок полученных сообщений соответствуют ожиданиям.
## Заключение теста:
По результатам испытаний можно сделать следующие выводы:
- Приложение Node.js может правильно создавать и использовать сообщения Kafka, а также поддерживать надежность и порядок сообщений. Тест проходит.
## Примечание:
Конфигурация тестовой среды:
- Операционная система: CentOS 7
- Версия Node.js: 14.15.4.
- Версия Кафки: 2.8.0
- Инструмент тестирования: KafkaJS (клиентская библиотека Node.js Kafka)