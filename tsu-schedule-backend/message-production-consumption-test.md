# Проверка производства и потребления сообщений

## Тестовая цель:
Убедитесь, что архитектура приложения правильно создает и использует сообщения.
## Шаги теста:
1. Обязательное условие: перед запуском кода была установлена библиотека kafkajs (ее можно установить, запустив` npm install kafkajs`), и была запущена команда `docker-compose up --build`.
2. Добавьте файл `message-production-consumption-test.js`, подробности см. в файле `message-production-consumption-test.js` и используйте клиентскую библиотеку Kafka для создания производителя в приложении Node.js.
3. Параметры подключения кластера Kafka
```javascript
const kafkaBrokers = ['localhost:29092'];
const kafkaTopic = 'моя тема';
```
4. Запустите `node message-production-consumption-test.js`, чтобы отправить несколько сообщений в указанную тему Kafka.
5. Запустите `npm run start:consumer`, потребитель получит сообщения из темы Kafka и проверит содержимое и5порядок сообщений.
## Результаты теста:
- Отправить сообщение
![](https://huatu.98youxi.com/markdown/work/uploads/upload_3968f4d28d2880a0f7b8266c88f1b0f3.png)

 - Сообщения, полученные потребителями Kafka
 ![](https://huatu.98youxi.com/markdown/work/uploads/upload_331fb3c9ad43d7dfb678d890cf2085b5.png)


- Приложение Node.js успешно создало производителя Kafka и смогло эффективно взаимодействовать с кластером Kafka.
- Несколько сообщений были успешно отправлены в указанную тему Kafka и сохраняются в том порядке, в котором они были отправлены.
- Потребитель Kafka успешно подключается к кластеру Kafka и получает сообщения из указанной темы.
- Потребитель проверяет, что содержание и порядок полученных сообщений соответствуют ожиданиям.
## Заключение теста:
По результатам испытаний можно сделать следующие выводы:
- Приложение Node.js может правильно создавать и использовать сообщения Kafka, а также поддерживать надежность и порядок сообщений. Тест проходит.
## Примечание:
Конфигурация тестовой среды:
- Операционная система: CentOS 7
- Версия Node.js: 14.15.4.
- Версия Кафки: 2.8.0
- Инструмент тестирования: KafkaJS (клиентская библиотека Node.js Kafka)